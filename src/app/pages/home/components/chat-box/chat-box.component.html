<!-- Nút icon chat nổi -->
<div class="chat-toggle" (click)="toggleChat()">
  💬
</div>

<!-- Khung chat -->
<div class="chat-container" *ngIf="isOpen">
  
  <!-- Giới thiệu -->
  <div class="chat-intro">
    <p>Chào mừng bạn đến với cửa hàng Serenity! 🏡</p>
  </div>

  <!-- Khung hiển thị tin nhắn -->
  <div class="chat-window">
    <div *ngFor="let msg of messages" class="message" [ngClass]="msg.role">
      <img [src]="msg.role === 'user' ? 'https://img.thuthuattinhoc.vn/uploads/2019/01/08/anh-anime_101906393.png' : 'https://png.pngtree.com/background/20230416/original/pngtree-ai-robot-innovation-high-tech-ppt-robot-template-background-image-picture-image_2443210.jpg'" class="avatar">
      <span [innerHTML]="formatMessage(msg.content)"></span>
    </div>
    <div *ngIf="loading" class="loading">🤖 AI đang trả lời...</div>
  </div>

  <!-- Ô nhập tin nhắn -->
  <div class="chat-input">
    <input type="text" [(ngModel)]="userInput" (keyup.enter)="sendMessage()" placeholder="Nhập tin nhắn..." />
    <button (click)="sendMessage()" [disabled]="loading || !userInput.trim()">Gửi</button>
  </div>
</div>
